"0","# Writing a function that uses each districts demand with trade, their cap without trade, and the equilibrium trading price to calculate how much they buy or sell and the price paid at the equilibrium trading price "
"0","net_abatement <- function(Qpolk, Qpolm, Qpola, Qpolv, TACk, TACm, TACa, TACv){"
"0","  diffk = Qpolk - 125"
"0","  transferk = diffk*199.1489"
"0","  netk = TACk + transferk"
"0","  "
"0","  diffm = Qpolm - 125"
"0","  transferm = diffm*199.1489"
"0","  netm = TACm + transferm"
"0","  "
"0","  diffa = Qpola - 125"
"0","  transfera = diffa*199.1489"
"0","  neta = TACa + transfera"
"0","  "
"0","  diffv = Qpolv - 125"
"0","  transferv = diffv*199.1489"
"0","  netv = TACv + transferv"
"0","  return(tibble(District = c(""Kern"", ""Mojave"", ""Antelope"", ""Ventura""), netTAC = c(netk, netm, neta, netv)))"
"0","}"
"0","# Using function and previous quantities/TAC's to calculate net cost of abatement for each district with sales and pruchases"
"0","net_abatement_cost <- net_abatement(quantity_with_trade[1, 2], quantity_with_trade[1, 3], quantity_with_trade[1, 4], quantity_with_trade[1, 5], TAC_capandtrade[1, 2], TAC_capandtrade[2, 2], TAC_capandtrade[3, 2], TAC_capandtrade[4, 2])"
"0",""
"0","knitr::kable(net_abatement_cost, align = ""c"", caption=""TAC by district Net of any sales of Purchases"")"
